<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="/fragments/partials :: head('Edit your remindr')"></head>
<body>
<nav th:replace="/fragments/partials :: navbar"></nav>
<div class="container">
    <h1>Edit your remindr event</h1>
    <form th:action="${'/remindrs/'+ remindr.id +'/edit'}" method="post" th:object="${remindr}">
        <!--TITLE-->
        <div class="form-group">
            <label for="title">Event title</label>
            <input id="title" name="title" th:field="*{title}" class="form-control" type="text"/>
        </div>
        <div
            class="alert alert-danger"
            th:if="${#fields.hasErrors('title')}"
            th:errors="*{title}" >
        </div>

        <!--DESCRIPTION-->
        <div class="form-group">
            <label for="description">Event description (optional) </label>
            <textarea class="form-control" rows="3" id="description" name="description" th:field="*{description}"></textarea>
            <!--<input type="text" id="description" name="description" th:field="*{description}" class="form-control" />-->
        </div>

        <!--START DATE/TIME-->
        <div class="form-group">
            <label for="startDateTime">Event start date/ time</label>
            <input id="startDateTime" name="startDateTime" class="form-control" type="datetime-local" th:field="*{startDateTime}" min="2017-01-01T00:00" max="3000-01-01T00:00"/>
        </div>
        <div
            class="alert alert-danger"
            th:if="${#fields.hasErrors('startDateTime')}"
            th:errors="*{startDateTime}" >
        </div>

        <!--END DATE/TIME-->
        <div class="form-group">
            <label for="endDateTime">Event end date/ time (optional) </label>
            <input id="endDateTime" name="endDateTime" class="form-control" type="datetime-local" th:field="*{endDateTime}" min="2017-01-01T00:00" max="3000-01-01T00:00"/>
        </div>

        <!--RECURRING EVENT INFO-->
        <div id='selector' class="form-group">
            <label for="recurrence">Recurring event (optional) </label>
            <input class="form-control" name="recurrence" type="hidden" id="recurrence" th:field="*{recurrence}"/>
        </div>
        <div class="form-group">
            <label for="timeZone">Event Timezone</label>
            <select id="timeZone" name="timezone">
                <option timeZoneId="3" gmtAdjustment="GMT-10:00" useDaylightTime="0" value="-10">(GMT-10:00) Hawaii</option>
                <option timeZoneId="4" gmtAdjustment="GMT-09:00" useDaylightTime="1" value="-9">(GMT-09:00) Alaska</option>
                <option timeZoneId="5" gmtAdjustment="GMT-08:00" useDaylightTime="1" value="-8">(GMT-08:00) Pacific Time (US &amp; Canada)</option>
                <option timeZoneId="9" gmtAdjustment="GMT-07:00" useDaylightTime="1" value="-7">(GMT-07:00) Mountain Time (US &amp; Canada)</option>
                <option timeZoneId="11" gmtAdjustment="GMT-06:00" useDaylightTime="1" value="-6">(GMT-06:00) Central Time (US &amp; Canada)</option>
                <option timeZoneId="15" gmtAdjustment="GMT-05:00" useDaylightTime="1" value="-5">(GMT-05:00) Eastern Time (US &amp; Canada)</option>
            </select>
        </div>
        <!--&lt;!&ndash;ALERTS&ndash;&gt;-->
        <!--<div class="form-group">-->
        <!--<label for="endDateTime">Set a remindr*</label>-->
        <!--<input id="endDateTime" name="endDateTime" class="form-control" type="datetime-local" th:field="*{alert}" />-->
        <!--</div>-->
        <!--<div-->
        <!--class="alert alert-danger"-->
        <!--th:if="${#fields.hasErrors('alert')}"-->
        <!--th:errors="*{alert}" >-->
        <!--</div>-->

        <!--LOCATION-->
        <div class="form-group">
            <label for="location">Event location</label>
            <input type="text" id="location" name="location" th:field="*{location}" class="form-control" />
        </div>
        <div
                class="alert alert-danger"
                th:if="${#fields.hasErrors('location')}"
                th:errors="*{location}" >
        </div>


            <input type="submit" class="btn btn-primary"/>
        </form>
        <a href="/remindrs" class="btn btn-danger">Cancel</a>

        <!--&lt;!&ndash;UPLOAD AN IMAGE&ndash;&gt;-->
        <!--<h2>Upload an Image</h2>-->

</div>

<div th:replace="/fragments/partials :: scripts"></div>
<script type="text/javascript" src="/scripts/cron/jquery-cron.js"></script>
<script th:inline="javascript" type="text/javascript">
    $(document).ready(function() {
        $('#selector').cron({
            initial: "0 12 * * 5",
            onChange: function() {
                $('#recurrence').val($(this).cron("value"));
            }
        }); // apply cron with default options
        var recurrence=[[${remindr.recurrence}]];

        // Updating the value of an existing cron object
        cron_field.cron("value", recurrence);
    });
</script>
</body>
</html>